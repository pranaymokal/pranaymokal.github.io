import{a as K,b as X}from"./chunk-4NZ53I3E.js";import{a as J,b as G}from"./chunk-DSGD7C2U.js";import{e as I,f as Q}from"./chunk-5NQ6VLNP.js";import"./chunk-4G3JV5LT.js";import{a as D,b as N,c as T,f as V,h as F}from"./chunk-656PS7OG.js";import{a as j,f as z,g as H}from"./chunk-WLH2WFZL.js";import"./chunk-LZ4SCHVJ.js";import{c as A,g as U,j as B,r as q}from"./chunk-JK5CP44U.js";import"./chunk-IX6G3U3V.js";import{a as P,e as O}from"./chunk-NM5EPDZ2.js";import"./chunk-SYUWEKLR.js";import"./chunk-O72EB7BB.js";import{$ as W,_ as L}from"./chunk-PLKLLSDY.js";import{$b as M,Cb as e,Db as t,Eb as v,Ib as w,Lb as f,Oc as R,Uc as E,Vb as C,Wb as i,Ya as m,Za as _,ac as S,bc as y,dc as k,ka as b,qb as x,sa as d,sb as u,ta as s}from"./chunk-JLDN7L3T.js";function Y(g,p){g&1&&(e(0,"div",17)(1,"mat-icon",18),i(2,"videocam_off"),t(),e(3,"p"),i(4,"Camera is not active"),t()())}function Z(g,p){g&1&&v(0,"video",19)}var _e=(()=>{let p=class p{constructor(o){this.snackBar=o,this.scannedResult="",this.cameraActive=!1,this.videoStream=null,this.detectionCanvas=null,this.isDecoding=!1}startScanning(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){this.showNotification("Camera access not supported in this browser",!0);return}navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(o=>{this.videoStream=o,this.cameraActive=!0;let n=document.getElementById("qr-video");n&&(n.srcObject=o,n.play(),this.startDecoding())}).catch(()=>{this.showNotification("Failed to access camera",!0)})}stopScanning(){this.videoStream&&(this.videoStream.getTracks().forEach(o=>o.stop()),this.videoStream=null),this.cameraActive=!1,this.isDecoding=!1}startDecoding(){if(!this.cameraActive)return;let o=document.getElementById("qr-video"),n=document.createElement("canvas"),a=n.getContext("2d");if(!o||!a)return;n.width=o.videoWidth,n.height=o.videoHeight;let c=()=>{if(!this.cameraActive)return;a.drawImage(o,0,0,n.width,n.height);let r=a.getImageData(0,0,n.width,n.height);this.decodeQRFromImage(n),requestAnimationFrame(c)};c()}decodeQRFromImage(o){let n=o.toDataURL("image/png");this.isDecoding||(this.isDecoding=!0,setTimeout(()=>{this.isDecoding=!1},500))}uploadQRImage(o){let n=o.target.files[0];if(!n)return;let a=new FileReader;a.onload=c=>{let r=new Image;r.onload=()=>{let l=document.createElement("canvas");l.width=r.width,l.height=r.height;let h=l.getContext("2d");h&&(h.drawImage(r,0,0),this.decodeQRImage(l))},r.src=c.target.result},a.readAsDataURL(n)}decodeQRImage(o){this.showNotification("Please use a QR scanning library like jsQR or QuaggaJS for actual decoding",!0)}decodeManually(){if(!this.scannedResult.trim()){this.showNotification("Please enter QR code data",!0);return}try{this.scannedResult.startsWith("http")&&window.open(this.scannedResult,"_blank"),this.showNotification("Data processed successfully")}catch{this.showNotification("Error processing QR code",!0)}}copyResult(){if(!this.scannedResult){this.showNotification("No scanned result to copy",!0);return}navigator.clipboard.writeText(this.scannedResult).then(()=>{this.showNotification("Copied to clipboard!")},()=>{this.showNotification("Failed to copy",!0)})}openUrl(){if(!this.scannedResult.startsWith("http")){this.showNotification("Not a valid URL",!0);return}window.open(this.scannedResult,"_blank")}clearResult(){this.scannedResult=""}showNotification(o,n=!1){this.snackBar.open(o,"Close",{duration:3e3,panelClass:n?"error-snackbar":"success-snackbar"})}};p.\u0275fac=function(n){return new(n||p)(_(K))},p.\u0275cmp=b({type:p,selectors:[["app-qrcode-scanner"]],standalone:!0,features:[k],decls:67,vars:8,consts:[["fileInput",""],[1,"tool-container"],[1,"gradient-toolbar"],[1,"content"],["class","no-camera",4,"ngIf"],["id","qr-video","class","video-stream","playsinline","",4,"ngIf"],[1,"button-group"],["mat-raised-button","","color","primary",1,"full-width-button",3,"click","disabled"],["mat-raised-button","","color","warn",1,"full-width-button",3,"click","disabled"],[1,"upload-section"],["type","file","accept","image/*",2,"display","none",3,"change"],["mat-raised-button","","color","accent",1,"full-width-button",3,"click"],[1,"hint"],["appearance","outline",1,"full-width"],["matInput","","rows","4","placeholder","Scanned QR code data will appear here...",3,"ngModelChange","ngModel"],["mat-raised-button","",1,"full-width-button",3,"click","disabled"],[1,"info-section"],[1,"no-camera"],[1,"large-icon"],["id","qr-video","playsinline","",1,"video-stream"]],template:function(n,a){if(n&1){let c=w();e(0,"div",1)(1,"mat-toolbar",2),i(2,"QR Code Scanner"),t(),e(3,"div",3)(4,"mat-card")(5,"mat-card-header")(6,"mat-card-title"),i(7,"Camera Scanner"),t()(),e(8,"mat-card-content"),x(9,Y,5,0,"div",4)(10,Z,1,0,"video",5),e(11,"div",6)(12,"button",7),f("click",function(){return d(c),s(a.startScanning())}),e(13,"mat-icon"),i(14,"videocam"),t(),i(15," Start Camera "),t(),e(16,"button",8),f("click",function(){return d(c),s(a.stopScanning())}),e(17,"mat-icon"),i(18,"stop"),t(),i(19," Stop Camera "),t()()()(),e(20,"mat-card")(21,"mat-card-header")(22,"mat-card-title"),i(23,"Upload QR Image"),t()(),e(24,"mat-card-content")(25,"div",9)(26,"input",10,0),f("change",function(l){return d(c),s(a.uploadQRImage(l))}),t(),e(28,"button",11),f("click",function(){d(c);let l=C(27);return s(l.click())}),e(29,"mat-icon"),i(30,"image"),t(),i(31," Upload Image "),t(),e(32,"p",12),i(33,"Upload a QR code image to decode"),t()()()(),e(34,"mat-card")(35,"mat-card-header")(36,"mat-card-title"),i(37,"Scanned Result"),t()(),e(38,"mat-card-content")(39,"mat-form-field",13)(40,"mat-label"),i(41,"Decoded Data"),t(),e(42,"textarea",14),y("ngModelChange",function(l){return d(c),S(a.scannedResult,l)||(a.scannedResult=l),s(l)}),t()(),e(43,"div",6)(44,"button",7),f("click",function(){return d(c),s(a.copyResult())}),e(45,"mat-icon"),i(46,"content_copy"),t(),i(47," Copy "),t(),e(48,"button",7),f("click",function(){return d(c),s(a.openUrl())}),e(49,"mat-icon"),i(50,"open_in_new"),t(),i(51," Open URL "),t(),e(52,"button",15),f("click",function(){return d(c),s(a.clearResult())}),e(53,"mat-icon"),i(54,"clear"),t(),i(55," Clear "),t()()()(),e(56,"div",16)(57,"mat-icon"),i(58,"info"),t(),e(59,"p"),i(60," Note: To fully implement QR scanning, integrate a library like "),e(61,"strong"),i(62,"jsQR"),t(),i(63," or "),e(64,"strong"),i(65,"html5-qrcode"),t(),i(66," via npm. "),t()()()()}n&2&&(m(9),u("ngIf",!a.cameraActive),m(),u("ngIf",a.cameraActive),m(2),u("disabled",a.cameraActive),m(4),u("disabled",!a.cameraActive),m(26),M("ngModel",a.scannedResult),m(2),u("disabled",!a.scannedResult),m(4),u("disabled",!a.scannedResult),m(4),u("disabled",!a.scannedResult))},dependencies:[E,R,q,A,U,B,W,L,H,z,j,G,J,O,P,Q,I,F,D,T,V,N,X],styles:[".tool-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background:linear-gradient(135deg,#1a1a2e,#16213e)}.gradient-toolbar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea33,#764ba233);-webkit-backdrop-filter:blur(15px);backdrop-filter:blur(15px);border-bottom:1px solid rgba(255,255,255,.15);color:#fff;box-shadow:0 8px 32px #1f26875e}.content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:20px}mat-card[_ngcontent-%COMP%]{background:#ffffff0d!important;border:1px solid rgba(255,255,255,.15)!important;-webkit-backdrop-filter:blur(10px)!important;backdrop-filter:blur(10px)!important;color:#fff}.no-camera[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center;color:#ffffffb3}.large-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:15px;color:#fff6}.video-stream[_ngcontent-%COMP%]{width:100%;border-radius:4px;background-color:#000;margin-bottom:15px}.upload-section[_ngcontent-%COMP%]{text-align:center}.upload-section[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:12px;color:#fff9;margin-top:10px}.button-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin-top:15px}.full-width-button[_ngcontent-%COMP%], .full-width[_ngcontent-%COMP%]{width:100%}textarea[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:12px}button[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.info-section[_ngcontent-%COMP%]{display:flex;gap:10px;padding:15px;background-color:#667eea26;border-left:4px solid #667eea;border-radius:8px;color:#fffc;font-size:13px;line-height:1.6}.info-section[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{flex-shrink:0;margin-top:2px}.info-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}@media (max-width: 600px){.content[_ngcontent-%COMP%]{padding:10px;gap:10px}.large-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}}"]});let g=p;return g})();export{_e as QrcodeScannerComponent};
