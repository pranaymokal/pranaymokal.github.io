import{a as K,b as tt}from"./chunk-WP2YYH2F.js";import{e as U,f as O}from"./chunk-XT2IQ3D5.js";import{a as et,b as it,d as st}from"./chunk-4Y6WF5IE.js";import"./chunk-MNQXB7X7.js";import{a as N,h as B}from"./chunk-YSQ72WQN.js";import{a as q,f as Y,g as J}from"./chunk-5FOU7XJ3.js";import"./chunk-ZSIKLVUD.js";import{a as L,d as F,e as X,h as W,i as z,j,k as $,l as H,m as Q}from"./chunk-AA6GNP3Q.js";import"./chunk-IX6G3U3V.js";import{a as P,d as D}from"./chunk-5LO4275Q.js";import"./chunk-MS74HAEY.js";import"./chunk-ZFKPOTVR.js";import{I as C,P as V,T as A,Y as Z,Z as G}from"./chunk-NGWNS653.js";import{$b as k,Ab as a,Bb as g,Ib as m,Ic as S,Oc as E,Tb as l,Wb as w,Xa as c,Ya as p,aa as M,ba as R,d as I,g as T,k as x,ka as v,la as y,ob as b,qb as h,zb as n}from"./chunk-Z6PLNZJS.js";var at=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=y({type:i}),i.\u0275inj=R({imports:[C,V]});let d=i;return d})();var nt=(()=>{let i=class i{constructor(){this._speaking$=new x(!1),this.speaking$=this._speaking$.asObservable()}getVoices(){return new Promise(s=>{let t=window.speechSynthesis,e=t.getVoices();if(e.length){s(e);return}let r=()=>{e=t.getVoices(),s(e),t.removeEventListener("voiceschanged",r)};t.addEventListener("voiceschanged",r)})}speak(s,t={}){if(!("speechSynthesis"in window)){console.warn("Speech Synthesis not supported by this browser");return}this.cancel(),this.utterance=new SpeechSynthesisUtterance(s);let e=window.speechSynthesis;if(t.voiceUri){let o=(e.getVoices()||[]).find(_=>_.voiceURI===t.voiceUri||_.name===t.voiceUri);o&&(this.utterance.voice=o)}this.utterance.rate=t.rate??1,this.utterance.pitch=t.pitch??1,this.utterance.volume=t.volume??1,this.utterance.onstart=()=>this._speaking$.next(!0),this.utterance.onend=()=>this._speaking$.next(!1),this.utterance.onerror=()=>this._speaking$.next(!1),e.speak(this.utterance)}pause(){"speechSynthesis"in window&&window.speechSynthesis.speaking&&(window.speechSynthesis.pause(),this._speaking$.next(!1))}resume(){"speechSynthesis"in window&&window.speechSynthesis.paused&&(window.speechSynthesis.resume(),this._speaking$.next(!0))}cancel(){"speechSynthesis"in window&&window.speechSynthesis.cancel(),this._speaking$.next(!1)}fetchAudio(s,t={}){return new T(e=>{fetch("/api/tts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:s,options:t})}).then(r=>{if(!r.ok)throw new Error("Server TTS request failed");return r.blob()}).then(r=>{e.next(r),e.complete()}).catch(r=>e.error(r))})}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=M({token:i,factory:i.\u0275fac,providedIn:"root"});let d=i;return d})();function lt(d,i){if(d&1&&(n(0,"mat-option",14),l(1),a()),d&2){let u=i.$implicit;h("value",u.voiceURI||u.name),c(),w("",u.name," (",u.lang,")")}}var ae=(()=>{let i=class i{constructor(s,t){this.fb=s,this.tts=t,this.voices=[],this.samples=["Hello! This is a sample text to demonstrate text to speech.","Angular makes building UIs productive and enjoyable.","Accessibility is important: provide text alternatives for audio content."],this.isSpeaking=!1,this.form=this.fb.group({text:[""],voice:[""],rate:[1],pitch:[1],volume:[1]})}ngOnInit(){this.loadVoices(),this.tts.speaking$.subscribe(s=>this.isSpeaking=s)}loadVoices(){return I(this,null,function*(){let s=yield this.tts.getVoices();this.voices=s.sort((t,e)=>t.name.localeCompare(e.name)),this.voices.length&&!this.form.value.voice&&this.form.patchValue({voice:this.voices[0].voiceURI??this.voices[0].name})})}play(){let{text:s,voice:t,rate:e,pitch:r,volume:o}=this.form.value;!s||!s.trim()||this.tts.speak(s,{voiceUri:t,rate:e,pitch:r,volume:o})}pause(){this.tts.pause()}resume(){this.tts.resume()}stop(){this.tts.cancel()}useSample(s){this.form.patchValue({text:s})}download(){let{text:s,voice:t,rate:e,pitch:r}=this.form.value;this.tts.fetchAudio(s,{voiceUri:t,rate:e,pitch:r}).subscribe({next:o=>{let _=URL.createObjectURL(o),f=document.createElement("a");f.href=_,f.download="tts.wav",f.click(),URL.revokeObjectURL(_)},error:o=>{alert("Download is not configured for this demo. Provide a backend TTS endpoint at /api/tts to enable downloads.")}})}};i.\u0275fac=function(t){return new(t||i)(p($),p(nt))},i.\u0275cmp=v({type:i,selectors:[["app-tts"]],standalone:!0,features:[k],decls:32,vars:4,consts:[[1,"tts-card"],[1,"gradient-toolbar"],[3,"formGroup"],[1,"tts-body"],["appearance","outline",1,"full-width"],["matInput","","rows","6","formControlName","text"],[1,"controls"],["appearance","outline"],["formControlName","voice"],[3,"value",4,"ngFor","ngForOf"],[1,"actions"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","accent",3,"click","disabled"],["mat-stroked-button","",3,"click"],[3,"value"]],template:function(t,e){t&1&&(n(0,"mat-card",0)(1,"mat-toolbar",1),l(2,"Text to Speech"),a(),n(3,"form",2)(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),l(7,"Enter text"),a(),g(8,"textarea",5),a(),n(9,"div",6)(10,"mat-form-field",7)(11,"mat-label"),l(12,"Voice"),a(),n(13,"mat-select",8),b(14,lt,2,3,"mat-option",9),a()()(),n(15,"div",10)(16,"button",11),m("click",function(){return e.play()}),n(17,"mat-icon"),l(18,"play_arrow"),a(),l(19," Play "),a(),n(20,"button",12),m("click",function(){return e.pause()}),n(21,"mat-icon"),l(22,"pause"),a(),l(23," Pause "),a(),n(24,"button",12),m("click",function(){return e.resume()}),n(25,"mat-icon"),l(26,"play_circle"),a(),l(27," Resume "),a(),n(28,"button",13),m("click",function(){return e.stop()}),n(29,"mat-icon"),l(30,"stop"),a(),l(31," Stop "),a()()()()()),t&2&&(c(3),h("formGroup",e.form),c(11),h("ngForOf",e.voices),c(6),h("disabled",!e.isSpeaking),c(4),h("disabled",e.isSpeaking))},dependencies:[E,S,H,W,L,F,X,Q,z,j,J,Y,q,tt,K,it,et,A,at,D,P,O,U,B,N,st,G,Z],styles:[".tts-card[_ngcontent-%COMP%]{max-width:900px;margin:24px auto;padding:16px}.full-width[_ngcontent-%COMP%]{width:100%}.controls[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;margin-top:12px;align-items:center}.controls[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{min-width:240px;flex:1}.actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:14px;flex-wrap:wrap}.samples[_ngcontent-%COMP%]{margin-top:18px}.samples-title[_ngcontent-%COMP%]{font-weight:600;margin-bottom:6px}.sample-list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:8px}.tts-card[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;min-height:140px;resize:vertical}.tts-card[_ngcontent-%COMP%]   .mat-flat-button.mat-primary[_ngcontent-%COMP%]{background-color:#ff9800!important;color:#fff!important}.tts-card[_ngcontent-%COMP%]   .mat-flat-button.mat-accent[_ngcontent-%COMP%]{background-color:#fb8c00!important;color:#fff!important}.tts-card[_ngcontent-%COMP%]   .mat-stroked-button[_ngcontent-%COMP%]{border-color:#ff9800!important;color:#ff9800!important}.tts-card[_ngcontent-%COMP%]   .mat-slider[_ngcontent-%COMP%]   .mat-slider-thumb[_ngcontent-%COMP%]{background-color:#ff9800!important;border-color:#ff9800!important}.tts-card[_ngcontent-%COMP%]   .mat-slider[_ngcontent-%COMP%]   .mat-slider-track-fill[_ngcontent-%COMP%]{background-color:#ff9800!important}.tts-card[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{color:#000}@media (max-width:600px){.controls[_ngcontent-%COMP%]{flex-direction:column}.small-number[_ngcontent-%COMP%]{width:100%}}.gradient-toolbar[_ngcontent-%COMP%]{background:linear-gradient(to right,#ff7a18,#ffd166);color:#fff}.form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2em auto 0;width:100%}"]});let d=i;return d})();export{ae as TtsComponent};
