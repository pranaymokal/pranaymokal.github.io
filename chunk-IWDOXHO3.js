import{a as ne,b as oe,c as ae}from"./chunk-2KGGAGM4.js";import{a as re,b as se}from"./chunk-LIH4WI6F.js";import{a as te,b as ie}from"./chunk-LXPIABHE.js";import{e as R,f as T}from"./chunk-OGSA63ZA.js";import"./chunk-RKKVVHRT.js";import{a as N,b as A,c as F,e as Q,f as L,h as D}from"./chunk-PIOE26UH.js";import{a as Z,f as $,g as ee}from"./chunk-3CUTFLP2.js";import"./chunk-SLMWOJUF.js";import{b as U,c as j,g as K,j as q,l as G,r as J}from"./chunk-RBQEKCHA.js";import"./chunk-IX6G3U3V.js";import{a as H,d as B}from"./chunk-K6MC7JDA.js";import"./chunk-MIEZW6RE.js";import"./chunk-7RUZDB74.js";import{$ as Y,_ as X}from"./chunk-JHVXOMI4.js";import{$b as w,Bb as n,Cb as i,Db as S,Hb as y,Kb as _,Mb as c,Nc as k,Tc as V,Ua as b,Ub as O,Vb as r,Wb as W,Xa as s,Xb as f,Ya as v,Yb as z,_b as C,ac as M,cc as E,ka as P,pb as I,rb as u,sa as d,ta as p}from"./chunk-5DLN4SFQ.js";function le(l,g){if(l&1&&(n(0,"span",11),r(1),i()),l&2){let t=c();s(),W(t.fileName)}}function me(l,g){if(l&1&&(n(0,"div",12)(1,"h3"),r(2,"Original Image Preview"),i(),S(3,"img",13),n(4,"p"),r(5),i(),n(6,"p"),r(7),i()()),l&2){let t=c();s(3),u("src",t.originalImage,b),s(2),f("Size: ",(t.originalSize/1024).toFixed(2)," KB"),s(2),z("Dimensions: ",t.originalWidth," x ",t.originalHeight," px")}}function ce(l,g){if(l&1){let t=y();n(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),r(3,"Compression & Resize Settings"),i()(),n(4,"mat-card-content")(5,"div",14)(6,"label"),r(7),i(),n(8,"mat-slider",15),M("ngModelChange",function(e){d(t);let a=c();return w(a.compressionQuality,e)||(a.compressionQuality=e),p(e)}),n(9,"input",16),M("ngModelChange",function(e){d(t);let a=c();return w(a.compressionQuality,e)||(a.compressionQuality=e),p(e)}),i()()(),n(10,"div",14)(11,"mat-form-field",17)(12,"mat-label"),r(13,"Width (px)"),i(),n(14,"input",18),M("ngModelChange",function(e){d(t);let a=c();return w(a.resizeWidth,e)||(a.resizeWidth=e),p(e)}),_("change",function(){d(t);let e=c();return p(e.updateHeight())}),i()(),n(15,"mat-form-field",17)(16,"mat-label"),r(17,"Height (px)"),i(),n(18,"input",18),M("ngModelChange",function(e){d(t);let a=c();return w(a.resizeHeight,e)||(a.resizeHeight=e),p(e)}),_("change",function(){d(t);let e=c();return p(e.updateWidth())}),i()()(),n(19,"div",19)(20,"label")(21,"input",20),M("ngModelChange",function(e){d(t);let a=c();return w(a.maintainAspectRatio,e)||(a.maintainAspectRatio=e),p(e)}),i(),r(22," Maintain Aspect Ratio "),i()(),n(23,"button",21),_("click",function(){d(t);let e=c();return p(e.compressAndResize())}),n(24,"mat-icon"),r(25,"compress"),i(),r(26),i()()()}if(l&2){let t=c();s(7),f("Compression Quality: ",t.compressionQuality,"%"),s(),u("min",10)("max",100)("step",5),C("ngModel",t.compressionQuality),s(),C("ngModel",t.compressionQuality),s(5),C("ngModel",t.resizeWidth),s(4),C("ngModel",t.resizeHeight),s(3),C("ngModel",t.maintainAspectRatio),s(2),u("disabled",t.isProcessing),s(3),f(" ",t.isProcessing?"Processing...":"Compress & Resize"," ")}}function de(l,g){if(l&1){let t=y();n(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),r(3,"Compressed Result"),i()(),n(4,"mat-card-content"),S(5,"img",22),n(6,"div",23)(7,"p"),r(8),i(),n(9,"p"),r(10),i(),n(11,"p"),r(12),i(),n(13,"p"),r(14),i()()(),n(15,"mat-card-actions")(16,"button",24),_("click",function(){d(t);let e=c();return p(e.downloadCompressed())}),n(17,"mat-icon"),r(18,"download"),i(),r(19," Download "),i()()()}if(l&2){let t=c();s(5),u("src",t.compressedImage,b),s(3),f("Compressed Size: ",(t.compressedSize/1024).toFixed(2)," KB"),s(2),f("Reduction: ",t.compressionRatio,"%"),s(2),f("Saved: ",((t.originalSize-t.compressedSize)/1024).toFixed(2)," KB"),s(2),z("Dimensions: ",t.resizeWidth," x ",t.resizeHeight," px")}}var Ve=(()=>{let g=class g{constructor(o){this.snackBar=o,this.originalImage=null,this.compressedImage=null,this.originalSize=0,this.compressedSize=0,this.compressionRatio=0,this.compressionQuality=80,this.resizeWidth=100,this.resizeHeight=100,this.maintainAspectRatio=!0,this.originalWidth=0,this.originalHeight=0,this.fileName="",this.isProcessing=!1}onImageSelected(o){let e=o.target.files[0];if(!e)return;this.fileName=e.name;let a=new FileReader;a.onload=h=>{let m=new Image;m.onload=()=>{this.originalImage=h.target.result,this.originalWidth=m.width,this.originalHeight=m.height,this.resizeWidth=m.width,this.resizeHeight=m.height,this.originalSize=e.size,this.showNotification("Image loaded successfully")},m.src=h.target.result},a.readAsDataURL(e)}updateHeight(){this.maintainAspectRatio&&this.originalHeight>0&&(this.resizeHeight=Math.round(this.resizeWidth*this.originalHeight/this.originalWidth))}updateWidth(){this.maintainAspectRatio&&this.originalWidth>0&&(this.resizeWidth=Math.round(this.resizeHeight*this.originalWidth/this.originalHeight))}compressAndResize(){if(!this.originalImage){this.showNotification("Please upload an image first",!0);return}this.isProcessing=!0;let o=new Image;o.onload=()=>{let e=document.createElement("canvas");e.width=this.resizeWidth,e.height=this.resizeHeight;let a=e.getContext("2d");a&&(a.drawImage(o,0,0,this.resizeWidth,this.resizeHeight),this.compressedImage=e.toDataURL("image/jpeg",this.compressionQuality/100),this.compressedSize=this.dataURLtoBlob(this.compressedImage).size,this.compressionRatio=Math.round((this.originalSize-this.compressedSize)/this.originalSize*100),this.showNotification(`Compression complete! Reduced by ${this.compressionRatio}%`)),this.isProcessing=!1},o.src=this.originalImage}downloadCompressed(){if(!this.compressedImage){this.showNotification("Please compress an image first",!0);return}let o=document.createElement("a");o.href=this.compressedImage;let e=this.fileName.replace(/\.[^/.]+$/,"_compressed.jpg");o.download=e,o.click(),this.showNotification("Downloaded successfully")}reset(){this.originalImage=null,this.compressedImage=null,this.originalSize=0,this.compressedSize=0,this.compressionRatio=0,this.compressionQuality=80,this.fileName="";let o=document.querySelector('input[type="file"]');o&&(o.value="")}dataURLtoBlob(o){let e=o.split(","),a=e[0].match(/:(.*?);/)?.[1]||"image/jpeg",h=atob(e[1]),m=h.length,x=new Uint8Array(m);for(;m--;)x[m]=h.charCodeAt(m);return new Blob([x],{type:a})}showNotification(o,e=!1){this.snackBar.open(o,"Close",{duration:3e3,panelClass:e?"error-snackbar":"success-snackbar"})}};g.\u0275fac=function(e){return new(e||g)(v(re))},g.\u0275cmp=P({type:g,selectors:[["app-image-compression"]],standalone:!0,features:[E],decls:24,vars:4,consts:[["fileInput",""],[1,"tool-container"],[1,"gradient-toolbar"],[1,"content"],[1,"upload-section"],["type","file","accept","image/*",2,"display","none",3,"change"],["mat-raised-button","","color","primary",1,"upload-button",3,"click"],["class","file-name",4,"ngIf"],["class","preview-section",4,"ngIf"],[4,"ngIf"],["mat-raised-button","",1,"full-width-button",3,"click"],[1,"file-name"],[1,"preview-section"],["alt","Original",1,"preview-img",3,"src"],[1,"settings-group"],[1,"slider",3,"ngModelChange","min","max","step","ngModel"],["matSliderThumb","",3,"ngModelChange","ngModel"],["appearance","outline",1,"half-width"],["matInput","","type","number",3,"ngModelChange","change","ngModel"],[1,"checkbox-group"],["type","checkbox",3,"ngModelChange","ngModel"],["mat-raised-button","","color","accent",1,"full-width-button",3,"click","disabled"],["alt","Compressed",1,"preview-img",3,"src"],[1,"stats"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,a){if(e&1){let h=y();n(0,"div",1)(1,"mat-toolbar",2),r(2,"Image Compression & Resizer"),i(),n(3,"div",3)(4,"mat-card")(5,"mat-card-header")(6,"mat-card-title"),r(7,"Upload Image"),i()(),n(8,"mat-card-content")(9,"div",4)(10,"input",5,0),_("change",function(x){return d(h),p(a.onImageSelected(x))}),i(),n(12,"button",6),_("click",function(){d(h);let x=O(11);return p(x.click())}),n(13,"mat-icon"),r(14,"upload"),i(),r(15," Choose Image "),i(),I(16,le,2,1,"span",7),i(),I(17,me,8,4,"div",8),i()(),I(18,ce,27,11,"mat-card",9)(19,de,20,6,"mat-card",9),n(20,"button",10),_("click",function(){return d(h),p(a.reset())}),n(21,"mat-icon"),r(22,"clear"),i(),r(23," Reset "),i()()()}e&2&&(s(16),u("ngIf",a.fileName),s(),u("ngIf",a.originalImage),s(),u("ngIf",a.originalImage),s(),u("ngIf",a.compressedImage))},dependencies:[V,k,J,j,G,U,K,q,Y,X,ee,$,Z,ie,te,B,H,T,R,D,N,Q,F,L,A,ae,ne,oe,se],styles:[".tool-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background-color:#f5f5f5}.gradient-toolbar[_ngcontent-%COMP%]{background:linear-gradient(to right,#ff7a18,#ffd166);color:#fff}.content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:20px}mat-card[_ngcontent-%COMP%]{background-color:#fff}.upload-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;flex-wrap:wrap}.upload-button[_ngcontent-%COMP%]{min-width:150px}.file-name[_ngcontent-%COMP%]{color:#666;font-size:14px;font-weight:500}.preview-section[_ngcontent-%COMP%]{margin-top:20px;text-align:center}.preview-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 10px;font-size:14px;color:#666}.preview-img[_ngcontent-%COMP%]{max-width:100%;max-height:300px;border:1px solid #ddd;border-radius:4px;margin-bottom:10px}.preview-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;font-size:13px;color:#999}.settings-group[_ngcontent-%COMP%]{margin-bottom:20px}.settings-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-weight:500;color:#333}.slider[_ngcontent-%COMP%]{width:100%;margin-bottom:15px}.half-width[_ngcontent-%COMP%]{width:48%;margin-right:4%}.half-width[_ngcontent-%COMP%]:nth-child(2n){margin-right:0}.checkbox-group[_ngcontent-%COMP%]{margin-bottom:20px}.checkbox-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;cursor:pointer;font-weight:400}.checkbox-group[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{cursor:pointer}.full-width-button[_ngcontent-%COMP%]{width:100%;margin-top:10px}.stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-top:15px}.stats[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#666}mat-card-actions[_ngcontent-%COMP%]{padding:16px;display:flex;justify-content:flex-end;gap:10px}button[mat-raised-button][_ngcontent-%COMP%]{min-width:120px}button[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}@media (max-width: 600px){.content[_ngcontent-%COMP%]{padding:10px;gap:10px}.half-width[_ngcontent-%COMP%]{width:100%;margin-right:0}.stats[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]});let l=g;return l})();export{Ve as ImageCompressionComponent};
