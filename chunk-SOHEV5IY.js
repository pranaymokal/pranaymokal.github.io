import{a as K,b as X}from"./chunk-LIH4WI6F.js";import{a as J,b as G}from"./chunk-LXPIABHE.js";import{e as I,f as Q}from"./chunk-OGSA63ZA.js";import"./chunk-RKKVVHRT.js";import{a as D,b as N,c as T,f as V,h as F}from"./chunk-PIOE26UH.js";import{a as j,f as z,g as H}from"./chunk-3CUTFLP2.js";import"./chunk-SLMWOJUF.js";import{c as A,g as U,j as B,r as q}from"./chunk-RBQEKCHA.js";import"./chunk-IX6G3U3V.js";import{a as P,d as O}from"./chunk-K6MC7JDA.js";import"./chunk-MIEZW6RE.js";import"./chunk-7RUZDB74.js";import{$ as W,_ as L}from"./chunk-JHVXOMI4.js";import{$b as S,Bb as e,Cb as t,Db as x,Hb as C,Kb as f,Nc as k,Tc as E,Ub as M,Vb as n,Xa as m,Ya as v,_b as b,ac as y,cc as R,ka as _,pb as w,rb as u,sa as d,ta as s}from"./chunk-5DLN4SFQ.js";function Y(g,p){g&1&&(e(0,"div",17)(1,"mat-icon",18),n(2,"videocam_off"),t(),e(3,"p"),n(4,"Camera is not active"),t()())}function Z(g,p){g&1&&x(0,"video",19)}var ve=(()=>{let p=class p{constructor(o){this.snackBar=o,this.scannedResult="",this.cameraActive=!1,this.videoStream=null,this.detectionCanvas=null,this.isDecoding=!1}startScanning(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){this.showNotification("Camera access not supported in this browser",!0);return}navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(o=>{this.videoStream=o,this.cameraActive=!0;let i=document.getElementById("qr-video");i&&(i.srcObject=o,i.play(),this.startDecoding())}).catch(()=>{this.showNotification("Failed to access camera",!0)})}stopScanning(){this.videoStream&&(this.videoStream.getTracks().forEach(o=>o.stop()),this.videoStream=null),this.cameraActive=!1,this.isDecoding=!1}startDecoding(){if(!this.cameraActive)return;let o=document.getElementById("qr-video"),i=document.createElement("canvas"),a=i.getContext("2d");if(!o||!a)return;i.width=o.videoWidth,i.height=o.videoHeight;let c=()=>{if(!this.cameraActive)return;a.drawImage(o,0,0,i.width,i.height);let r=a.getImageData(0,0,i.width,i.height);this.decodeQRFromImage(i),requestAnimationFrame(c)};c()}decodeQRFromImage(o){let i=o.toDataURL("image/png");this.isDecoding||(this.isDecoding=!0,setTimeout(()=>{this.isDecoding=!1},500))}uploadQRImage(o){let i=o.target.files[0];if(!i)return;let a=new FileReader;a.onload=c=>{let r=new Image;r.onload=()=>{let l=document.createElement("canvas");l.width=r.width,l.height=r.height;let h=l.getContext("2d");h&&(h.drawImage(r,0,0),this.decodeQRImage(l))},r.src=c.target.result},a.readAsDataURL(i)}decodeQRImage(o){this.showNotification("Please use a QR scanning library like jsQR or QuaggaJS for actual decoding",!0)}decodeManually(){if(!this.scannedResult.trim()){this.showNotification("Please enter QR code data",!0);return}try{this.scannedResult.startsWith("http")&&window.open(this.scannedResult,"_blank"),this.showNotification("Data processed successfully")}catch{this.showNotification("Error processing QR code",!0)}}copyResult(){if(!this.scannedResult){this.showNotification("No scanned result to copy",!0);return}navigator.clipboard.writeText(this.scannedResult).then(()=>{this.showNotification("Copied to clipboard!")},()=>{this.showNotification("Failed to copy",!0)})}openUrl(){if(!this.scannedResult.startsWith("http")){this.showNotification("Not a valid URL",!0);return}window.open(this.scannedResult,"_blank")}clearResult(){this.scannedResult=""}showNotification(o,i=!1){this.snackBar.open(o,"Close",{duration:3e3,panelClass:i?"error-snackbar":"success-snackbar"})}};p.\u0275fac=function(i){return new(i||p)(v(K))},p.\u0275cmp=_({type:p,selectors:[["app-qrcode-scanner"]],standalone:!0,features:[R],decls:67,vars:8,consts:[["fileInput",""],[1,"tool-container"],[1,"gradient-toolbar"],[1,"content"],["class","no-camera",4,"ngIf"],["id","qr-video","class","video-stream","playsinline","",4,"ngIf"],[1,"button-group"],["mat-raised-button","","color","primary",1,"full-width-button",3,"click","disabled"],["mat-raised-button","","color","warn",1,"full-width-button",3,"click","disabled"],[1,"upload-section"],["type","file","accept","image/*",2,"display","none",3,"change"],["mat-raised-button","","color","accent",1,"full-width-button",3,"click"],[1,"hint"],["appearance","outline",1,"full-width"],["matInput","","rows","4","placeholder","Scanned QR code data will appear here...",3,"ngModelChange","ngModel"],["mat-raised-button","",1,"full-width-button",3,"click","disabled"],[1,"info-section"],[1,"no-camera"],[1,"large-icon"],["id","qr-video","playsinline","",1,"video-stream"]],template:function(i,a){if(i&1){let c=C();e(0,"div",1)(1,"mat-toolbar",2),n(2,"QR Code Scanner"),t(),e(3,"div",3)(4,"mat-card")(5,"mat-card-header")(6,"mat-card-title"),n(7,"Camera Scanner"),t()(),e(8,"mat-card-content"),w(9,Y,5,0,"div",4)(10,Z,1,0,"video",5),e(11,"div",6)(12,"button",7),f("click",function(){return d(c),s(a.startScanning())}),e(13,"mat-icon"),n(14,"videocam"),t(),n(15," Start Camera "),t(),e(16,"button",8),f("click",function(){return d(c),s(a.stopScanning())}),e(17,"mat-icon"),n(18,"stop"),t(),n(19," Stop Camera "),t()()()(),e(20,"mat-card")(21,"mat-card-header")(22,"mat-card-title"),n(23,"Upload QR Image"),t()(),e(24,"mat-card-content")(25,"div",9)(26,"input",10,0),f("change",function(l){return d(c),s(a.uploadQRImage(l))}),t(),e(28,"button",11),f("click",function(){d(c);let l=M(27);return s(l.click())}),e(29,"mat-icon"),n(30,"image"),t(),n(31," Upload Image "),t(),e(32,"p",12),n(33,"Upload a QR code image to decode"),t()()()(),e(34,"mat-card")(35,"mat-card-header")(36,"mat-card-title"),n(37,"Scanned Result"),t()(),e(38,"mat-card-content")(39,"mat-form-field",13)(40,"mat-label"),n(41,"Decoded Data"),t(),e(42,"textarea",14),y("ngModelChange",function(l){return d(c),S(a.scannedResult,l)||(a.scannedResult=l),s(l)}),t()(),e(43,"div",6)(44,"button",7),f("click",function(){return d(c),s(a.copyResult())}),e(45,"mat-icon"),n(46,"content_copy"),t(),n(47," Copy "),t(),e(48,"button",7),f("click",function(){return d(c),s(a.openUrl())}),e(49,"mat-icon"),n(50,"open_in_new"),t(),n(51," Open URL "),t(),e(52,"button",15),f("click",function(){return d(c),s(a.clearResult())}),e(53,"mat-icon"),n(54,"clear"),t(),n(55," Clear "),t()()()(),e(56,"div",16)(57,"mat-icon"),n(58,"info"),t(),e(59,"p"),n(60," Note: To fully implement QR scanning, integrate a library like "),e(61,"strong"),n(62,"jsQR"),t(),n(63," or "),e(64,"strong"),n(65,"html5-qrcode"),t(),n(66," via npm. "),t()()()()}i&2&&(m(9),u("ngIf",!a.cameraActive),m(),u("ngIf",a.cameraActive),m(2),u("disabled",a.cameraActive),m(4),u("disabled",!a.cameraActive),m(26),b("ngModel",a.scannedResult),m(2),u("disabled",!a.scannedResult),m(4),u("disabled",!a.scannedResult),m(4),u("disabled",!a.scannedResult))},dependencies:[E,k,q,A,U,B,W,L,H,z,j,G,J,O,P,Q,I,F,D,T,V,N,X],styles:[".tool-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background-color:#f5f5f5}.gradient-toolbar[_ngcontent-%COMP%]{background:linear-gradient(to right,#ff7a18,#ffd166);color:#fff}.content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:20px}mat-card[_ngcontent-%COMP%]{background-color:#fff}.no-camera[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center;color:#999}.large-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:15px;color:#ddd}.video-stream[_ngcontent-%COMP%]{width:100%;border-radius:4px;background-color:#000;margin-bottom:15px}.upload-section[_ngcontent-%COMP%]{text-align:center}.upload-section[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:12px;color:#999;margin-top:10px}.button-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin-top:15px}.full-width-button[_ngcontent-%COMP%], .full-width[_ngcontent-%COMP%]{width:100%}textarea[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:12px}button[disabled][_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed}.info-section[_ngcontent-%COMP%]{display:flex;gap:10px;padding:15px;background-color:#e3f2fd;border-left:4px solid #2196f3;border-radius:4px;color:#1565c0;font-size:13px;line-height:1.6}.info-section[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{flex-shrink:0;margin-top:2px}.info-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}@media (max-width: 600px){.content[_ngcontent-%COMP%]{padding:10px;gap:10px}.large-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}}"]});let g=p;return g})();export{ve as QrcodeScannerComponent};
