import{c as tt}from"./chunk-2KGGAGM4.js";import{a as Q,b as W}from"./chunk-LXPIABHE.js";import{f as T,g as E}from"./chunk-INTSD7WA.js";import{b as Z}from"./chunk-2UWWJV4K.js";import{a as X,b as Y}from"./chunk-QOU7OCHW.js";import"./chunk-RKKVVHRT.js";import{a as U,h as V}from"./chunk-PIOE26UH.js";import{a as H,f as J,g as K}from"./chunk-3CUTFLP2.js";import"./chunk-SLMWOJUF.js";import{c as $,g as j,h as N,k as R,m as L,n as A,q as D,r as B,s as G}from"./chunk-RBQEKCHA.js";import"./chunk-IX6G3U3V.js";import{a as F,d as I}from"./chunk-K6MC7JDA.js";import"./chunk-MIEZW6RE.js";import"./chunk-7RUZDB74.js";import{$ as z,U as P,_ as q}from"./chunk-JHVXOMI4.js";import{Bb as a,Cb as r,Db as C,Kb as f,Mc as k,Tc as O,Vb as s,Xa as m,Ya as g,Yb as S,aa as _,cc as y,d as v,g as M,k as b,ka as w,pb as x,rb as p}from"./chunk-5DLN4SFQ.js";var et=(()=>{let o=class o{constructor(){this._speaking$=new b(!1),this.speaking$=this._speaking$.asObservable()}getVoices(){return new Promise(i=>{let t=window.speechSynthesis,e=t.getVoices();if(e.length){i(e);return}let n=()=>{e=t.getVoices(),i(e),t.removeEventListener("voiceschanged",n)};t.addEventListener("voiceschanged",n)})}speak(i,t={}){if(!("speechSynthesis"in window)){console.warn("Speech Synthesis not supported by this browser");return}this.cancel(),this.utterance=new SpeechSynthesisUtterance(i);let e=window.speechSynthesis;if(t.voiceUri){let l=(e.getVoices()||[]).find(d=>d.voiceURI===t.voiceUri||d.name===t.voiceUri);l&&(this.utterance.voice=l)}this.utterance.rate=t.rate??1,this.utterance.pitch=t.pitch??1,this.utterance.volume=t.volume??1,this.utterance.onstart=()=>this._speaking$.next(!0),this.utterance.onend=()=>this._speaking$.next(!1),this.utterance.onerror=()=>this._speaking$.next(!1),e.speak(this.utterance)}pause(){"speechSynthesis"in window&&window.speechSynthesis.speaking&&(window.speechSynthesis.pause(),this._speaking$.next(!1))}resume(){"speechSynthesis"in window&&window.speechSynthesis.paused&&(window.speechSynthesis.resume(),this._speaking$.next(!0))}cancel(){"speechSynthesis"in window&&window.speechSynthesis.cancel(),this._speaking$.next(!1)}fetchAudio(i,t={}){return new M(e=>{fetch("/api/tts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:i,options:t})}).then(n=>{if(!n.ok)throw new Error("Server TTS request failed");return n.blob()}).then(n=>{e.next(n),e.complete()}).catch(n=>e.error(n))})}};o.\u0275fac=function(t){return new(t||o)},o.\u0275prov=_({token:o,factory:o.\u0275fac,providedIn:"root"});let c=o;return c})();function ot(c,o){if(c&1&&(a(0,"mat-option",14),s(1),r()),c&2){let u=o.$implicit;p("value",u.voiceURI||u.name),m(),S("",u.name," (",u.lang,")")}}var Ot=(()=>{let o=class o{constructor(i,t){this.fb=i,this.tts=t,this.voices=[],this.samples=["Hello! This is a sample text to demonstrate text to speech.","Angular makes building UIs productive and enjoyable.","Accessibility is important: provide text alternatives for audio content."],this.isSpeaking=!1,this.form=this.fb.group({text:[""],voice:[""],rate:[1],pitch:[1],volume:[1]})}ngOnInit(){this.loadVoices(),this.tts.speaking$.subscribe(i=>this.isSpeaking=i)}loadVoices(){return v(this,null,function*(){let i=yield this.tts.getVoices();this.voices=i.sort((t,e)=>t.name.localeCompare(e.name)),this.voices.length&&!this.form.value.voice&&this.form.patchValue({voice:this.voices[0].voiceURI??this.voices[0].name})})}play(){let{text:i,voice:t,rate:e,pitch:n,volume:l}=this.form.value;!i||!i.trim()||this.tts.speak(i,{voiceUri:t,rate:e,pitch:n,volume:l})}pause(){this.tts.pause()}resume(){this.tts.resume()}stop(){this.tts.cancel()}useSample(i){this.form.patchValue({text:i})}download(){let{text:i,voice:t,rate:e,pitch:n}=this.form.value;this.tts.fetchAudio(i,{voiceUri:t,rate:e,pitch:n}).subscribe({next:l=>{let d=URL.createObjectURL(l),h=document.createElement("a");h.href=d,h.download="tts.wav",h.click(),URL.revokeObjectURL(d)},error:l=>{alert("Download is not configured for this demo. Provide a backend TTS endpoint at /api/tts to enable downloads.")}})}};o.\u0275fac=function(t){return new(t||o)(g(D),g(et))},o.\u0275cmp=w({type:o,selectors:[["app-tts"]],standalone:!0,features:[y],decls:32,vars:4,consts:[[1,"tts-card"],[1,"gradient-toolbar"],[3,"formGroup"],[1,"tts-body"],["appearance","outline",1,"full-width"],["matInput","","rows","6","formControlName","text"],[1,"controls"],["appearance","outline"],["formControlName","voice"],[3,"value",4,"ngFor","ngForOf"],[1,"actions"],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","color","accent",3,"click","disabled"],["mat-stroked-button","",3,"click"],[3,"value"]],template:function(t,e){t&1&&(a(0,"mat-card",0)(1,"mat-toolbar",1),s(2,"Text to Speech"),r(),a(3,"form",2)(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),s(7,"Enter text"),r(),C(8,"textarea",5),r(),a(9,"div",6)(10,"mat-form-field",7)(11,"mat-label"),s(12,"Voice"),r(),a(13,"mat-select",8),x(14,ot,2,3,"mat-option",9),r()()(),a(15,"div",10)(16,"button",11),f("click",function(){return e.play()}),a(17,"mat-icon"),s(18,"play_arrow"),r(),s(19," Play "),r(),a(20,"button",12),f("click",function(){return e.pause()}),a(21,"mat-icon"),s(22,"pause"),r(),s(23," Pause "),r(),a(24,"button",12),f("click",function(){return e.resume()}),a(25,"mat-icon"),s(26,"play_circle"),r(),s(27," Resume "),r(),a(28,"button",13),f("click",function(){return e.stop()}),a(29,"mat-icon"),s(30,"stop"),r(),s(31," Stop "),r()()()()()),t&2&&(m(3),p("formGroup",e.form),m(11),p("ngForOf",e.voices),m(6),p("disabled",!e.isSpeaking),m(4),p("disabled",e.isSpeaking))},dependencies:[O,k,B,R,$,j,N,G,L,A,K,J,H,W,Q,Y,X,P,tt,I,F,E,T,V,U,Z,z,q],styles:[".tts-card[_ngcontent-%COMP%]{max-width:900px;margin:24px auto;padding:16px}.full-width[_ngcontent-%COMP%]{width:100%}.controls[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;margin-top:12px;align-items:center}.controls[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{min-width:240px;flex:1}.actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:14px;flex-wrap:wrap}.samples[_ngcontent-%COMP%]{margin-top:18px}.samples-title[_ngcontent-%COMP%]{font-weight:600;margin-bottom:6px}.sample-list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:8px}.tts-card[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;min-height:140px;resize:vertical}.tts-card[_ngcontent-%COMP%]   .mat-flat-button.mat-primary[_ngcontent-%COMP%]{background-color:#ff9800!important;color:#fff!important}.tts-card[_ngcontent-%COMP%]   .mat-flat-button.mat-accent[_ngcontent-%COMP%]{background-color:#fb8c00!important;color:#fff!important}.tts-card[_ngcontent-%COMP%]   .mat-stroked-button[_ngcontent-%COMP%]{border-color:#ff9800!important;color:#ff9800!important}.tts-card[_ngcontent-%COMP%]   .mat-slider[_ngcontent-%COMP%]   .mat-slider-thumb[_ngcontent-%COMP%]{background-color:#ff9800!important;border-color:#ff9800!important}.tts-card[_ngcontent-%COMP%]   .mat-slider[_ngcontent-%COMP%]   .mat-slider-track-fill[_ngcontent-%COMP%]{background-color:#ff9800!important}.tts-card[_ngcontent-%COMP%]   .mat-select[_ngcontent-%COMP%]   .mat-select-trigger[_ngcontent-%COMP%]{color:#000}@media (max-width:600px){.controls[_ngcontent-%COMP%]{flex-direction:column}.small-number[_ngcontent-%COMP%]{width:100%}}.gradient-toolbar[_ngcontent-%COMP%]{background:linear-gradient(to right,#ff7a18,#ffd166);color:#fff}.form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:2em auto 0;width:100%}"]});let c=o;return c})();export{Ot as TtsComponent};
